#!/bin/bash

# Simple vs RAF μ„±λ¥ λΉ„κµ ν…μ¤νΈ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ

echo "π€ Simple vs RAF μ„±λ¥ λΉ„κµ ν…μ¤νΈ μ‹μ‘"
echo "β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”"

# ν„μ¬ λ””λ ‰ν† λ¦¬ ν™•μΈ
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# Node.jsκ°€ μ„¤μΉλμ–΄ μλ”μ§€ ν™•μΈ
if ! command -v node &> /dev/null; then
    echo "β Node.jsκ°€ μ„¤μΉλμ–΄ μμ§€ μ•μµλ‹λ‹¤."
    exit 1
fi

# μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
echo "π” μ„λ²„ μƒνƒ ν™•μΈ μ¤‘..."
if ! curl -s http://localhost:3000 > /dev/null; then
    echo "β μ„λ²„κ°€ μ‹¤ν–‰λμ§€ μ•μ•μµλ‹λ‹¤. http://localhost:3000 μ—μ„ μ„λ²„λ¥Ό μ‹μ‘ν•΄μ£Όμ„Έμ”."
    exit 1
fi

echo "β… μ„λ²„ μ •μƒ μ‘λ™ ν™•μΈλ¨"

# λ²¤μΉλ§ν¬ μ‹¤ν–‰
echo "π“ μ„±λ¥ ν…μ¤νΈ μ‹μ‘..."
node bench-simple-vs-raf-performance.js

echo "β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”"
echo "β… ν…μ¤νΈ μ™„λ£!"
echo "π“ κ²°κ³Όλ” bench/results/ ν΄λ”μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤."
